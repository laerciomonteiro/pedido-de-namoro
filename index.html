<!DOCTYPE html>

<html class="dark" lang="pt-br"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Nossa história...</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;700;900&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#ee2b5b",
                        "background-light": "#f8f6f6",
                        "background-dark": "#181113",
                        "soft-pink": "#ffb6c1",
                        "bg-dark": "#0a0a0a",
                    },
                    fontFamily: {
                        "display": ["Be Vietnam Pro", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "0.5rem",
                        "lg": "1rem",
                        "xl": "1.5rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>
<style>
        .polaroid {
            background: white;
            padding: 10px 10px 30px 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            transition: transform 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .polaroid:hover {
            transform: scale(1.05) rotate(0deg) !important;
            z-index: 10;
        }
        .polaroid img {
            transition: transform 0.3s ease;
        }
        .polaroid:hover img {
            transform: scale(1.02);
        }
        .polaroid .polaroid-overlay {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 0.5rem;
        }
        .heart-beat {
            animation: heartbeat 1.5s infinite ease-in-out;
        }
        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        .bg-gradient-romantic {
            background: radial-gradient(circle at center, #2d181c 0%, #181113 100%);
        }
        .music-player {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .music-player:hover {
            transform: scale(1.02);
        }
        .player-progress::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 14px;
            height: 14px;
            background: #ee2b5b;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(238,43,91,0.5);
        }
        .playlist-item {
            transition: all 0.3s ease;
        }
        .playlist-item:hover {
            background: rgba(238,43,91,0.2);
        }
        .playlist-item.active {
            background: rgba(238,43,91,0.3);
            border-left: 3px solid #ee2b5b;
        }
        .vinyl-spin {
            animation: spin 3s linear infinite;
            animation-play-state: paused;
        }
        .vinyl-spin.playing {
            animation-play-state: running;
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .equalizer-bar {
            animation: equalize 0.5s ease-in-out infinite alternate;
        }
        .equalizer-bar:nth-child(1) { animation-delay: 0s; }
        .equalizer-bar:nth-child(2) { animation-delay: 0.1s; }
        .equalizer-bar:nth-child(3) { animation-delay: 0.2s; }
        .equalizer-bar:nth-child(4) { animation-delay: 0.3s; }
        @keyframes equalize {
            from { height: 4px; }
            to { height: 16px; }
        }
        .equalizer-bar.paused {
            animation-play-state: paused;
        }
        @media (max-width: 768px) {
            #musicPlayer {
                width: 320px;
                right: 0;
                bottom: 18rem;
            }
            #musicPlayerContainer {
                bottom: 4;
                right: 4;
            }
        }
        @media (max-width: 480px) {
            #musicPlayer {
                width: calc(100vw - 2rem);
                right: 1rem;
                left: 1rem;
                bottom: 5.5rem;
            }
            #musicPlayerContainer {
                left: 1rem;
                right: 1rem;
                bottom: 1rem;
                display: flex;
                justify-content: flex-end;
            }
        }
        
        /* === Estilos da página de Memórias === */
        :root {
            --polaroid-bg: #1a1a1a;
            --soft-pink: #ffb6c1;
        }
        .polaroid-frame {
            background: var(--polaroid-bg);
            padding: 12px 12px 40px 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            transition: all 0.4s ease;
            position: absolute;
            z-index: 10;
        }
        .polaroid-frame:hover {
            transform: scale(1.1) rotate(0deg) !important;
            z-index: 50;
            border-color: #ee2b5b; /* primary color */
        }
        .floating-heart {
            position: absolute;
            color: rgba(238, 43, 91, 0.15);
            pointer-events: none;
            z-index: 0;
        }
        .canvas-area {
            position: relative;
            min-height: 800px;
        }
        
        /* Ajustes mobile para polaroids */
        @media (max-width: 768px) {
            .canvas-area {
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 2rem;
                height: auto !important;
                padding-bottom: 4rem;
            }
            
            .polaroid-frame {
                position: relative !important;
                top: auto !important;
                left: auto !important;
                right: auto !important;
                bottom: auto !important;
                transform: rotate(0deg) !important;
                margin: 0 auto;
            }
            
            /* Leve rotação para manter estilo mas menos caótico */
            .polaroid-frame:nth-child(odd) {
                transform: rotate(-2deg) !important;
            }
            
            .polaroid-frame:nth-child(even) {
                transform: rotate(2deg) !important;
            }
            
            /* Fix para o fundo de coração grande no mobile */
            .canvas-area > div.absolute.top-1\/2 {
                top: 50%;
                transform: translate(-50%, -50%);
            }
        }
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark font-display text-white">
<!-- SPA Container - Este conteúdo será substituído na navegação -->
<div id="spa-content">
<!-- Nav Bar -->
<div class="relative flex w-full flex-col group/design-root overflow-x-hidden">
<div class="layout-container flex h-full grow flex-col">
<div class="px-10 md:px-40 flex flex-1 justify-center py-5">
<div class="layout-content-container flex flex-col max-w-[960px] flex-1">
<header class="flex items-center justify-between whitespace-nowrap border-b border-solid border-b-[#39282c] px-4 md:px-10 py-3">
<div class="flex items-center gap-4 text-white">
<div class="text-primary">
<span class="material-symbols-outlined text-3xl" style="font-variation-settings: 'FILL' 1">favorite</span>
</div>
<h2 class="text-white text-lg font-bold leading-tight tracking-[-0.015em]">Nossa História</h2>
</div>
<!-- Menu Desktop -->
<div class="hidden md:flex flex-1 justify-end gap-8">
<div class="flex items-center gap-9">
<a class="text-white text-sm font-medium leading-normal hover:text-primary transition-colors" href="memorias.html">Memórias</a>
</div>
</div>
<!-- Menu Mobile (Hamburguer) -->
<div class="md:hidden">
<button class="text-white hover:text-primary transition-colors p-2" id="mobileMenuBtn" onclick="toggleMobileMenu()">
<span class="material-symbols-outlined text-2xl">menu</span>
</button>
</div>
</header>
</div>
</div>
</div>
</div>
<!-- Menu Mobile Dropdown (fora do container com overflow) -->
<div class="hidden md:hidden fixed top-16 left-0 right-0 bg-[#2d181c]/98 backdrop-blur-lg border-b border-primary/20 z-50 px-6 py-4" id="mobileMenu">
<div class="flex flex-col gap-4 items-center justify-center text-center">
<a class="text-white text-base font-medium leading-normal hover:text-primary transition-colors py-2" href="memorias.html">Memórias</a>
</div>
</div>
<!-- Main Content -->
<main class="flex flex-col items-center">
<!-- Polaroid Grid Section -->
<div class="max-w-[1200px] w-full px-4 md:px-10 py-10">
<h4 class="text-[#b99da4] text-sm font-bold leading-normal tracking-[0.015em] px-4 py-2 text-center uppercase">Momentos Especiais</h4>
<p class="text-white/60 text-sm font-normal text-center mb-8 italic">Clique em cada imagem para ver os detalhes</p>
<div class="flex flex-wrap justify-center gap-8 md:gap-12 py-10">
<!-- Polaroid 1 -->
<div class="polaroid rotate-[-3deg] w-48 h-60 dark:bg-zinc-800 cursor-pointer" onclick="openModal('assets/img/polaroid1.jpg', 'O começo de tudo...', 'Nossa primeira conversa no Instagram após se conhecer pelo Facebook Namoros kkk')">
<div class="w-full h-4/5 bg-center bg-cover rounded-sm" data-alt="Couple laughing together in a park" style='background-image: url("assets/img/polaroid1.jpg");'></div>
<p class="text-black dark:text-zinc-300 text-xs mt-3 text-center italic">O começo de tudo...</p>
<div class="polaroid-overlay absolute inset-0 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none">
<span class="material-symbols-outlined text-white text-4xl">zoom_in</span>
</div>
</div>
<!-- Polaroid 2 -->
<div class="polaroid rotate-[2deg] w-48 h-60 dark:bg-zinc-800 cursor-pointer" onclick="openModal('assets/img/polaroid2.jpg', 'Nosso primeiro date', 'Claramente no bom e velho Barraquim Vip. Não foi exatamente o primeiro, mas foi o primeiro que teve foto kk.')">
<div class="w-full h-4/5 bg-center bg-cover rounded-sm" data-alt="Couple eating ice cream together" style='background-image: url("assets/img/polaroid2.jpg");'></div>
<p class="text-black dark:text-zinc-300 text-xs mt-3 text-center italic">Nosso primeiro date</p>
<div class="polaroid-overlay absolute inset-0 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none">
<span class="material-symbols-outlined text-white text-4xl">zoom_in</span>
</div>
</div>
<!-- Polaroid 3 -->
<div class="polaroid rotate-[-1deg] w-48 h-60 dark:bg-zinc-800 cursor-pointer" onclick="openModal('assets/img/polaroid3.jpg', 'Aquele pôr do sol', 'Bichinha réa, nem queria tirar foto no rolê na Beira Mar.')">
<div class="w-full h-4/5 bg-center bg-cover rounded-sm" data-alt="Couple watching the sunset" style='background-image: url("assets/img/polaroid3.jpg");'></div>
<p class="text-black dark:text-zinc-300 text-xs mt-3 text-center italic">Aquele pôr do sol</p>
<div class="polaroid-overlay absolute inset-0 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none">
<span class="material-symbols-outlined text-white text-4xl">zoom_in</span>
</div>
</div>
<!-- Polaroid 4 -->
<div class="polaroid rotate-[4deg] w-48 h-60 dark:bg-zinc-800 cursor-pointer" onclick="openModal('assets/img/polaroid4.jpg', 'Aventuras', 'Depois de um ataque de caramelos e marimbondos e de caminhar feito a peste, sobrevivemos kkkk')">
<div class="w-full h-4/5 bg-center bg-cover rounded-sm" data-alt="Couple dancing at a wedding" style='background-image: url("assets/img/polaroid4.jpg");'></div>
<p class="text-black dark:text-zinc-300 text-xs mt-3 text-center italic">Aventuras</p>
<div class="polaroid-overlay absolute inset-0 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none">
<span class="material-symbols-outlined text-white text-4xl">zoom_in</span>
</div>
</div>
</div>
</div>
<!-- Headline Text -->
<div class="max-w-[800px] text-center px-6">
<h2 class="text-white tracking-light text-[32px] md:text-[48px] font-bold leading-tight pb-3 pt-5">
                Cada dia com você é uma nova página...
            </h2>
<p class="text-[#b99da4] text-lg leading-relaxed max-w-2xl mx-auto">
                Desde o momento em que te conheci pessoalmente, percebi aos poucos como você se encaixava direitinho no meu mundo. 
                Cada sorriso seu é gostoso de ver, e cada abraço é o meu lugar seguro.
                Você é a peça que faltava no meu quebra-cabeça.
            </p>
</div>
<!-- Hero / Question Section -->
<div class="layout-content-container flex flex-col max-w-[960px] w-full py-16">
<div class="@container">
<div class="@[480px]:p-4">
<div class="flex min-h-[500px] flex-col gap-8 bg-cover bg-center bg-no-repeat @[480px]:gap-10 @[480px]:rounded-3xl items-center justify-center p-8 relative overflow-hidden bg-gradient-romantic border border-primary/20 shadow-2xl shadow-primary/10" data-alt="Abstract romantic red and dark gradient background">
<div class="z-10 flex flex-col gap-4 text-center">
<div class="flex justify-center mb-2">
<span class="material-symbols-outlined text-primary text-6xl heart-beat" style="font-variation-settings: 'FILL' 1">favorite</span>
</div>
<h1 class="text-white text-5xl font-black leading-tight tracking-[-0.033em] @[480px]:text-7xl">
                                Quer namorar comigo?
                            </h1>
<p class="text-white/80 text-base @[480px]:text-xl font-normal leading-normal max-w-xl mx-auto">
                                Quero construir um futuro ao seu lado, enfrentar os desafios e celebrar as vitórias juntos. Aceita?
                            </p>
</div>
<!-- Buttons Section -->
<div class="z-10 flex flex-wrap gap-6 justify-center mt-6 items-center">
<!-- Sim Button -->
<button class="flex min-w-[160px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-14 px-8 bg-primary text-white text-xl font-bold leading-normal tracking-[0.015em] shadow-lg shadow-primary/40 hover:scale-110 transition-transform active:scale-95 group" id="yesBtn">
<span class="flex items-center gap-2">Sim ❤️</span>
</button>
<!-- Não Button (Interactive displacement target) -->
<button class="flex min-w-[120px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-12 px-6 bg-transparent border-2 border-white/20 text-white/60 text-lg font-bold leading-normal tracking-[0.015em] hover:bg-white/10 transition-all" id="noBtn">
<span>Não</span>
</button>
</div>
<!-- Decorative Elements -->
<div class="absolute top-10 left-10 text-primary/10 rotate-12">
<span class="material-symbols-outlined text-9xl">favorite</span>
</div>
<div class="absolute bottom-10 right-10 text-primary/10 -rotate-12">
<span class="material-symbols-outlined text-9xl">favorite</span>
</div>
</div>
</div>
</div>
</div>
<!-- Image Modal (Hidden) -->
<div class="hidden fixed inset-0 z-50 bg-background-dark/95 flex items-center justify-center p-4 md:p-8" id="imageModal">
<!-- Botão de fechar fixo no topo da tela, sempre visível -->
<button class="fixed top-4 right-4 z-[60] w-12 h-12 flex items-center justify-center bg-primary/80 hover:bg-primary rounded-full text-white shadow-lg transition-all" onclick="closeModal()">
<span class="material-symbols-outlined text-3xl">close</span>
</button>
<div class="bg-[#2d181c]/95 backdrop-blur-lg rounded-2xl shadow-2xl shadow-black/50 border border-primary/30 overflow-hidden p-4 md:p-6 max-w-lg w-full mx-4">
<div class="flex justify-center">
<img id="modalImage" src="" alt="Foto ampliada" class="max-w-full max-h-[50vh] md:max-h-[60vh] rounded-lg object-contain">
</div>
<div class="mt-4 md:mt-6 text-center">
<h3 id="modalCaption" class="text-white text-lg md:text-xl font-bold mb-2"></h3>
<p id="modalDescription" class="text-[#b99da4] text-sm md:text-base leading-relaxed">Um momento especial da nossa história</p>
</div>
</div>
</div>

<!-- Celebration Section (Hidden) -->
<div class="hidden fixed inset-0 z-50 bg-background-dark/95 flex flex-col items-center justify-center p-4" id="celebration">
<div class="absolute inset-0 pointer-events-none overflow-hidden">
<!-- Visual Firework Placeholders using Gradients -->
<div class="absolute top-1/4 left-1/4 w-2 h-2 rounded-full bg-primary shadow-[0_0_100px_40px_rgba(238,43,91,0.6)]"></div>
<div class="absolute top-1/3 right-1/4 w-2 h-2 rounded-full bg-yellow-400 shadow-[0_0_120px_50px_rgba(250,204,21,0.5)]"></div>
<div class="absolute bottom-1/4 left-1/2 w-2 h-2 rounded-full bg-blue-400 shadow-[0_0_100px_40px_rgba(96,165,250,0.5)]"></div>
</div>
<div class="z-50 text-center">
<h2 class="text-white text-6xl md:text-8xl font-black mb-4">Amo você!</h2>
<div class="w-64 h-64 md:w-96 md:h-96 mx-auto rounded-full border-8 border-primary overflow-hidden shadow-2xl shadow-primary/50 mb-8">
<div class="w-full h-full bg-center bg-cover" data-alt="The couple's best photo together" style='background-image: url("assets/img/celebration.jpg");'></div>
</div>
<p class="text-white text-2xl font-medium tracking-widest uppercase mb-8">Laercio & Bruna</p>
<div class="flex flex-col items-center gap-4">
<a href="memorias.html" class="px-8 py-3 bg-primary text-white text-lg font-bold rounded-full shadow-lg shadow-primary/40 hover:scale-105 transition-transform flex items-center gap-2">
<span class="material-symbols-outlined">photo_library</span>
Ver Nossas Memórias
</a>
<button class="px-6 py-2 text-white/60 hover:text-white transition-colors text-sm uppercase tracking-wider" onclick="document.getElementById('celebration').classList.add('hidden')">Fechar</button>
</div>
</div>
</div>
</main>
<!-- Footer -->
<footer class="w-full py-10 border-t border-white/5 mt-10">
<div class="max-w-[960px] mx-auto text-center">
<p class="text-white/40 text-sm italic">Feito com amor, para o meu amor.</p>
</div>
</footer>
</div>
<!-- Fim do SPA Container -->

<!-- Floating Music Player (FORA do SPA container - permanece entre navegações) -->
<div class="fixed bottom-6 right-6 z-40" id="musicPlayerContainer">
    <button class="w-14 h-14 rounded-full bg-primary shadow-lg shadow-primary/40 flex items-center justify-center hover:scale-110 transition-transform duration-300" id="playerToggle" onclick="togglePlayer()">
        <span class="material-symbols-outlined text-white text-3xl" id="toggleIcon">music_note</span>
    </button>
    <div class="absolute bottom-20 right-0 w-80 music-player opacity-0 invisible pointer-events-none" id="musicPlayer">
        <div class="bg-[#2d181c]/95 backdrop-blur-lg rounded-2xl shadow-2xl shadow-black/50 border border-primary/30 overflow-hidden">
            <div class="p-4">
                <div class="flex items-center gap-4 mb-4">
                    <div class="w-16 h-16 rounded-full bg-gradient-to-br from-primary to-pink-600 flex items-center justify-center vinyl-spin" id="vinyl">
                        <div class="w-4 h-4 rounded-full bg-[#181113]"></div>
                    </div>
                    <div class="flex-1 min-w-0">
                        <h4 class="text-white font-bold text-sm truncate" id="songTitle">Música 1</h4>
                        <p class="text-[#b99da4] text-xs truncate" id="artistName">Artista</p>
                    </div>
                    <div class="flex items-end gap-0.5 h-4" id="equalizer">
                        <div class="equalizer-bar w-1 bg-primary rounded-full paused"></div>
                        <div class="equalizer-bar w-1 bg-primary rounded-full paused"></div>
                        <div class="equalizer-bar w-1 bg-primary rounded-full paused"></div>
                        <div class="equalizer-bar w-1 bg-primary rounded-full paused"></div>
                    </div>
                </div>
                <div class="flex items-center gap-3 mb-3">
                    <span class="text-white/60 text-xs" id="currentTime">0:00</span>
                    <input type="range" class="flex-1 h-1 bg-white/20 rounded-full appearance-none player-progress" id="progressBar" value="0" min="0" max="100">
                    <span class="text-white/60 text-xs" id="duration">0:00</span>
                </div>
                <div class="flex items-center justify-center gap-4">
                    <button class="text-white/70 hover:text-primary transition-colors" onclick="prevSong()">
                        <span class="material-symbols-outlined">skip_previous</span>
                    </button>
                    <button class="w-12 h-12 rounded-full bg-primary flex items-center justify-center hover:scale-110 transition-transform" id="playBtn" onclick="togglePlay()">
                        <span class="material-symbols-outlined text-white">play_arrow</span>
                    </button>
                    <button class="text-white/70 hover:text-primary transition-colors" onclick="nextSong()">
                        <span class="material-symbols-outlined">skip_next</span>
                    </button>
                    <button class="text-white/70 hover:text-primary transition-colors" onclick="toggleMute()">
                        <span class="material-symbols-outlined" id="volumeIcon">volume_up</span>
                    </button>
                </div>
            </div>
            <div class="max-h-48 overflow-y-auto" id="playlistContainer">
                <div class="p-2 space-y-1" id="playlist">
                    <div class="playlist-item flex items-center gap-3 p-2 rounded-lg cursor-pointer active" onclick="playSong(0)">
                        <span class="material-symbols-outlined text-primary text-sm">favorite</span>
                        <div class="flex-1 min-w-0">
                            <p class="text-white text-xs truncate">Join Me In Death</p>
                            <p class="text-[#b99da4] text-[10px] truncate">HIM</p>
                        </div>
                    </div>
                    <div class="playlist-item flex items-center gap-3 p-2 rounded-lg cursor-pointer" onclick="playSong(1)">
                        <span class="material-symbols-outlined text-primary text-sm">favorite</span>
                        <div class="flex-1 min-w-0">
                            <p class="text-white text-xs truncate">Morena (Cover)</p>
                            <p class="text-[#b99da4] text-[10px] truncate">Felipe Amorim</p>
                        </div>
                    </div>
                    <div class="playlist-item flex items-center gap-3 p-2 rounded-lg cursor-pointer" onclick="playSong(2)">
                        <span class="material-symbols-outlined text-primary text-sm">favorite</span>
                        <div class="flex-1 min-w-0">
                            <p class="text-white text-xs truncate">Here Without You</p>
                            <p class="text-[#b99da4] text-[10px] truncate">3 Doors Down</p>
                        </div>
                    </div>
                    <div class="playlist-item flex items-center gap-3 p-2 rounded-lg cursor-pointer" onclick="playSong(3)">
                        <span class="material-symbols-outlined text-primary text-sm">favorite</span>
                        <div class="flex-1 min-w-0">
                            <p class="text-white text-xs truncate">The Kill (Bury Me)</p>
                            <p class="text-[#b99da4] text-[10px] truncate">Thirty Seconds To Mars</p>
                        </div>
                    </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<audio id="audioPlayer" preload="auto" autoplay></audio>

<script>
    const playlist = [
        { title: "Join Me In Death", artist: "HIM", file: "musicas/HIM - Join Me In Death.mp3" },    
        { title: "Morena (Cover)", artist: "Felipe Amorim", file: "musicas/Felipe Amorim - Morena (Vitor Kley Cover - IA).mp3" },
        { title: "Here Without You", artist: "3 Doors Down", file: "musicas/Here Without You - 3 Doors Down.mp3" },
        { title: "The Kill (Bury Me)", artist: "Thirty Seconds To Mars", file: "musicas/The Kill Bury Me - Thirty Seconds To Mars.mp3" }
    ];
    
    let currentSong = 0;
    let isPlaying = false;
    const audioPlayer = document.getElementById('audioPlayer');
    
    // Configuração inicial do audio player
    audioPlayer.volume = 0.5; // Volume inicial 50%
    audioPlayer.src = playlist[currentSong].file;

    // Tentar autoplay imediato
    const playPromise = audioPlayer.play();
    if (playPromise !== undefined) {
        playPromise.then(_ => {
            // Autoplay started!
            isPlaying = true;
            updateVisuals(true);
        }).catch(error => {
            // Autoplay was prevented.
            // Show a UI element to let the user manually start playback.
            console.log("Autoplay bloqueado pelo navegador. Aguardando interação.");
            isPlaying = false;
            updateVisuals(false);
        });
    }
    
    // Event listeners para o audio player
    audioPlayer.addEventListener('timeupdate', updateProgress);
    audioPlayer.addEventListener('ended', nextSong);
    audioPlayer.addEventListener('loadedmetadata', () => {
        document.getElementById('duration').textContent = formatTime(audioPlayer.duration);
    });
    
    // Função auxiliar para atualizar visuais (play button, vinyl, equalizer)
    function updateVisuals(playing) {
        const playBtn = document.getElementById('playBtn');
        const vinyl = document.getElementById('vinyl');
        const bars = document.querySelectorAll('.equalizer-bar');
        
        if (playing) {
            playBtn.innerHTML = '<span class="material-symbols-outlined text-white">pause</span>';
            vinyl.classList.add('playing');
            bars.forEach(bar => bar.classList.remove('paused'));
        } else {
            playBtn.innerHTML = '<span class="material-symbols-outlined text-white">play_arrow</span>';
            vinyl.classList.remove('playing');
            bars.forEach(bar => bar.classList.add('paused'));
        }
    }

    function togglePlayer() {
        const player = document.getElementById('musicPlayer');
        const toggleIcon = document.getElementById('toggleIcon');
        
        if (player.classList.contains('opacity-0')) {
            player.classList.remove('opacity-0', 'invisible', 'pointer-events-none');
            player.classList.add('opacity-100', 'visible', 'pointer-events-auto');
            toggleIcon.textContent = 'close';
        } else {
            player.classList.remove('opacity-100', 'visible', 'pointer-events-auto');
            player.classList.add('opacity-0', 'invisible', 'pointer-events-none');
            toggleIcon.textContent = 'music_note';
        }
    }

    function togglePlay() {
        if (audioPlayer.paused) {
            audioPlayer.play().then(() => {
                isPlaying = true;
                updateVisuals(true);
            }).catch(e => console.error("Erro ao reproduzir:", e));
        } else {
            audioPlayer.pause();
            isPlaying = false;
            updateVisuals(false);
        }
    }

    function playSong(index) {
        currentSong = index;
        updateSongInfo();
        updatePlaylistActive();
        
        audioPlayer.src = playlist[currentSong].file;
        audioPlayer.play().then(() => {
            isPlaying = true;
            updateVisuals(true);
        }).catch(e => console.error("Erro ao reproduzir:", e));
    }

    function nextSong() {
        currentSong = (currentSong + 1) % playlist.length;
        playSong(currentSong);
    }

    function prevSong() {
        currentSong = (currentSong - 1 + playlist.length) % playlist.length;
        playSong(currentSong);
    }

    function toggleMute() {
        audioPlayer.muted = !audioPlayer.muted;
        const volumeIcon = document.getElementById('volumeIcon');
        volumeIcon.textContent = audioPlayer.muted ? 'volume_off' : 'volume_up';
    }

    function updateSongInfo() {
        document.getElementById('songTitle').textContent = playlist[currentSong].title;
        document.getElementById('artistName').textContent = playlist[currentSong].artist;
    }

    function updatePlaylistActive() {
        const items = document.querySelectorAll('.playlist-item');
        items.forEach((item, index) => {
            if (index === currentSong) {
                item.classList.add('active');
            } else {
                item.classList.remove('active');
            }
        });
    }

    function formatTime(seconds) {
        if (isNaN(seconds)) return "0:00";
        const mins = Math.floor(seconds / 60);
        const secs = Math.floor(seconds % 60);
        return `${mins}:${secs.toString().padStart(2, '0')}`;
    }

    function updateProgress() {
        const progressBar = document.getElementById('progressBar');
        const currentTimeEl = document.getElementById('currentTime');
        const durationEl = document.getElementById('duration');
        
        const current = audioPlayer.currentTime;
        const duration = audioPlayer.duration || 0;
        
        if (duration > 0) {
            const percent = (current / duration) * 100;
            progressBar.value = percent;
        }
        
        currentTimeEl.textContent = formatTime(current);
        // durationEl é atualizado no loadedmetadata, mas por segurança:
        if (duration > 0) durationEl.textContent = formatTime(duration);
    }

    document.getElementById('progressBar').addEventListener('input', (e) => {
        const percent = parseFloat(e.target.value);
        const duration = audioPlayer.duration;
        if (duration > 0) {
            audioPlayer.currentTime = (percent / 100) * duration;
        }
    });

    // Autoplay ao carregar a página (pode ser bloqueado pelo navegador)
    window.addEventListener('load', function() {
        setTimeout(() => {
            // Tenta reproduzir automaticamente, mas navegadores modernos bloqueiam se não houver interação
            // Vamos deixar pronto e tentar
            // togglePlayer(); // REMOVIDO: Player não abre mais automaticamente
            
            // Tentativa de autoplay (provavelmente será bloqueada sem interação prévia)
            // audioPlayer.play().catch(() => {
            //    console.log("Autoplay bloqueado pelo navegador - aguardando interação do usuário");
            // });
        }, 300);
    });

    // Image Modal Functions
    function openModal(imageSrc, caption, description) {
        const modal = document.getElementById('imageModal');
        const modalImage = document.getElementById('modalImage');
        const modalCaption = document.getElementById('modalCaption');
        const modalDescription = document.getElementById('modalDescription');
        
        modalImage.src = imageSrc;
        modalCaption.textContent = caption;
        modalDescription.textContent = description || "Um momento especial da nossa história";
        modal.classList.remove('hidden');
        document.body.style.overflow = 'hidden';
    }

    function closeModal() {
        const modal = document.getElementById('imageModal');
        modal.classList.add('hidden');
        document.body.style.overflow = '';
    }

    // Close modal on ESC key or click outside
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            closeModal();
        }
    });

    document.getElementById('imageModal').addEventListener('click', function(e) {
        if (e.target === this) {
            closeModal();
        }
    });

    // Mobile Menu Toggle
    function toggleMobileMenu() {
        const mobileMenu = document.getElementById('mobileMenu');
        const menuBtn = document.getElementById('mobileMenuBtn');
        
        if (mobileMenu.classList.contains('hidden')) {
            mobileMenu.classList.remove('hidden');
            menuBtn.innerHTML = '<span class="material-symbols-outlined text-2xl">close</span>';
        } else {
            mobileMenu.classList.add('hidden');
            menuBtn.innerHTML = '<span class="material-symbols-outlined text-2xl">menu</span>';
        }
    }

    // Fechar menu mobile ao clicar em um link
    document.querySelectorAll('#mobileMenu a').forEach(link => {
        link.addEventListener('click', () => {
            document.getElementById('mobileMenu').classList.add('hidden');
            document.getElementById('mobileMenuBtn').innerHTML = '<span class="material-symbols-outlined text-2xl">menu</span>';
        });
    });

    // ========================================
    // SISTEMA DE NAVEGAÇÃO SPA
    // ========================================
    
    // Inicializa os event listeners da página atual (index)
    function initIndexPage() {
        // Script do botão "Não" que foge
        const noBtn = document.getElementById('noBtn');
        const yesBtn = document.getElementById('yesBtn');
        const celebration = document.getElementById('celebration');
        
        if (noBtn) {
            noBtn.addEventListener('mouseover', function() {
                const x = Math.random() * (window.innerWidth - noBtn.clientWidth);
                const y = Math.random() * (window.innerHeight - noBtn.clientHeight);
                noBtn.style.position = 'fixed';
                noBtn.style.left = x + 'px';
                noBtn.style.top = y + 'px';
                noBtn.style.zIndex = '100';
            });
        }

        if (yesBtn && celebration) {
            yesBtn.addEventListener('click', function() {
                celebration.classList.remove('hidden');
            });
        }

        // Modal de imagem
        const imageModal = document.getElementById('imageModal');
        if (imageModal) {
            imageModal.addEventListener('click', function(e) {
                if (e.target === this) {
                    closeModal();
                }
            });
        }

        // Menu mobile
        document.querySelectorAll('#mobileMenu a').forEach(link => {
            link.addEventListener('click', () => {
                document.getElementById('mobileMenu').classList.add('hidden');
                const menuBtn = document.getElementById('mobileMenuBtn');
                if (menuBtn) {
                    menuBtn.innerHTML = '<span class="material-symbols-outlined text-2xl">menu</span>';
                }
            });
        });
    }

    // Inicializa a página de memórias
    function initMemoriasPage() {
        // Nenhuma inicialização especial necessária por enquanto
        console.log('Página Memórias carregada via SPA');
    }

    // Função para extrair o conteúdo do SPA de uma página HTML
    function extractSpaContent(html) {
        const parser = new DOMParser();
        const doc = parser.parseFromString(html, 'text/html');
        const spaContent = doc.getElementById('spa-content');
        return spaContent ? spaContent.innerHTML : null;
    }

    // Função principal de navegação SPA
    async function navigateTo(url, pushState = true) {
        try {
            const response = await fetch(url);
            if (!response.ok) throw new Error('Falha ao carregar página');
            
            const html = await response.text();
            const newContent = extractSpaContent(html);
            
            if (newContent) {
                // Substitui o conteúdo do SPA container
                document.getElementById('spa-content').innerHTML = newContent;
                
                // Scroll para o topo
                window.scrollTo(0, 0);
                
                // Atualiza a URL
                if (pushState) {
                    history.pushState({ url: url }, '', url);
                }
                
                // Inicializa scripts específicos da página
                const pageName = url.split('/').pop().replace('.html', '') || 'index';
                if (pageName === 'index' || pageName === '') {
                    initIndexPage();
                } else if (pageName === 'memorias') {
                    initMemoriasPage();
                }
                
                // Re-intercepta links após carregar novo conteúdo
                interceptLinks();
            } else {
                // Fallback: navegação tradicional se não encontrar spa-content
                window.location.href = url;
            }
        } catch (error) {
            console.error('Erro na navegação SPA:', error);
            // Fallback para navegação tradicional
            window.location.href = url;
        }
    }

    // Intercepta cliques em links internos
    function interceptLinks() {
        document.querySelectorAll('a[href]').forEach(link => {
            const href = link.getAttribute('href');
            
            // Verifica se é um link interno (não externo, não âncora)
            if (href && 
                !href.startsWith('http') && 
                !href.startsWith('#') && 
                !href.startsWith('mailto:') &&
                (href.endsWith('.html') || href === 'index.html' || href === 'memorias.html')) {
                
                // Remove listener anterior (evita duplicatas)
                link.removeEventListener('click', handleSpaClick);
                link.addEventListener('click', handleSpaClick);
            }
        });
    }

    // Handler para cliques SPA
    function handleSpaClick(e) {
        e.preventDefault();
        const href = this.getAttribute('href');
        navigateTo(href);
        
        // Fecha menu mobile se aberto
        const mobileMenu = document.getElementById('mobileMenu');
        if (mobileMenu && !mobileMenu.classList.contains('hidden')) {
            mobileMenu.classList.add('hidden');
            const menuBtn = document.getElementById('mobileMenuBtn');
            if (menuBtn) {
                menuBtn.innerHTML = '<span class="material-symbols-outlined text-2xl">menu</span>';
            }
        }
    }

    // Trata navegação com botões voltar/avançar do navegador
    window.addEventListener('popstate', function(e) {
        if (e.state && e.state.url) {
            navigateTo(e.state.url, false);
        } else {
            navigateTo(window.location.pathname, false);
        }
    });

    // Inicializa o SPA
    document.addEventListener('DOMContentLoaded', function() {
        // Salva o estado inicial
        history.replaceState({ url: window.location.pathname }, '', window.location.pathname);
        
        // Intercepta links
        interceptLinks();
        
        // Inicializa a página index
        initIndexPage();
    });
</script>
</body></html>